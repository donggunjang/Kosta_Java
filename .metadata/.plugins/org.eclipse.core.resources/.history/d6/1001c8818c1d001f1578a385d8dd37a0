package com.kosta.game5;

import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JPanel;

public class MyPanel extends JPanel implements KeyListener {
	//사용자, 적, 미사일 맴버로 초기화
	Enermy enermy;
	Player player;
	Missile missile;
	public MyPanel() {
		super();
		this.addKeyListener(this);
		//키보드 이벤트를 바로 설정 할 수 없어서
		//패널에 키보드 이벤트를 설정하기 위해
		//포커스를 설정
		this.requestFocus();
		setFocusable(true);
		
		//화면에 보여줄 사용자, 적, 미사일의 객체들을 생성
		enermy = new Enermy("enermy.png");
		player = new Player("player.png");
		missile = new Missile("missile.png");
		//사용자, 적, 미사일이 다들 동시다발적으로 움직이게 하기 위하여 해서 쓰레드를 만들어준다.
		//쓰레드클래스를 만든다.
		//다른곳에서는 쓰이지 않기 때문에 MyPanel 안에 Inner클래스로 만든다.
		class MyThread extends Thread{
			public void run() {
				while(true) {
					//각각의 그래픽오브젝트의 위치를 갱신.
					enermy.update();
					player.update();
					missile.update();
					repaint();
					try {
						Thread.sleep(50);
					}catch( InterruptedException e) {}
				}
			}
		}
		Thread t = new MyThread();
		t.start();
	}
	public void paint(Graphics g) {
		super.paint(g);
		enermy.draw(g);
		player.draw(g);
		missile.draw(g);
	}
	@Override
	public void keyTyped(KeyEvent e) {
		
	}
	@Override
	public void keyReleased(KeyEvent e) {
		
	}
	@Override
	public void keyPressed(KeyEvent event) {
		player.KeyPressed(event);
		missile.KeyPressed(event, player.x, player.y);
		
	}
	
}
